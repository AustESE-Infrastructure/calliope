{
"format": "XSL",
"title": "tei-lite",
"body": "<?xml version=\"1.0\"?>\n<xsl:stylesheet version=\"1.0\"\nxmlns:xsl=\"http:\/\/www.w3.org\/1999\/XSL\/Transform\">\n<!-- copy all other nodes as is to output -->\n<xsl:template match=\"node()|@*\">\n  <xsl:copy>\n     <xsl:apply-templates select=\"node()|@*\"\/>\n  <\/xsl:copy>\n<\/xsl:template>\n<!-- reorganise lists for HTML rendition -->\n<xsl:template match=\"\/\/list\">\n  <xsl:if test=\"count(.\/head)=1\">\n\t<xsl:copy-of select=\".\/head|@*\"><\/xsl:copy-of>\n    <xsl:text>\n<\/xsl:text>\n  <\/xsl:if>\n  <xsl:element name =\"list\">\n\t<xsl:for-each select=\"child::*\">\n\t\t<!-- delete child head elements (moved before list)-->\n\t\t<xsl:if test=\"name(.)!='head' and name(.)!='label'\">\n\t    \t    <xsl:copy-of select=\".\"><\/xsl:copy-of>\n            <xsl:text>\n<\/xsl:text>\n        <\/xsl:if>\n\t<\/xsl:for-each>\n  <\/xsl:element>\n<\/xsl:template>\n<!-- delete labels to list items - no representation in HTML -->\n<xsl:template match=\"\/\/list\/label\">\n<\/xsl:template>\n<!--delete front codes-->\n<xsl:template match=\"\/\/front\">\n\t<xsl:apply-templates select=\"*\"\/>\n<\/xsl:template>\n<!--delete back codes-->\n<xsl:template match=\"\/\/back\">\n\t<xsl:apply-templates select=\"*\"\/>\n<\/xsl:template>\n<!--delete body codes-->\n<xsl:template match=\"\/\/body\">\n\t<xsl:apply-templates select=\"*\"\/>\n<\/xsl:template>\n<!--quotes around soCalled and q-->\n<xsl:template match=\"\/\/soCalled\">\n\t<xsl:text>“<\/xsl:text><xsl:apply-templates\/><xsl:text>”<\/xsl:text>\n<\/xsl:template>\n<xsl:template match=\"\/\/q\">\n\t<xsl:text>“<\/xsl:text><xsl:apply-templates\/><xsl:text>”<\/xsl:text>\n<\/xsl:template>\n<!--gap-filler-->\n<xsl:template match=\"\/\/gap\">\n\t<xsl:element name=\"gap\">\n\t<xsl:text>[<\/xsl:text>\n\t<xsl:if test=\"@extent and @unit='chars'\">\n\t\t<xsl:call-template name=\"gapcounter\">\n  \t\t\t<xsl:with-param name=\"current\" select=\"1\"\/>\n  \t\t\t<xsl:with-param name=\"max\" select=\"number(@extent)\"\/>\n\t\t<\/xsl:call-template>\n\t<\/xsl:if>\n\t<xsl:text>]<\/xsl:text>\n\t<\/xsl:element>\n<\/xsl:template>\n<!--function to output one nb-space (used by \/\/gap)-->\n<xsl:template name=\"gapcounter\">\n  <xsl:param name=\"current\"\/>\n  <xsl:param name=\"max\"\/>\n  <xsl:if test=\" $max >= $current\">\n    <xsl:text> <\/xsl:text>\n    <!-- increase the counter for the recursive call -->\n    <xsl:call-template name=\"gapcounter\">\n      <xsl:with-param name=\"current\" select=\"$current + 1\"\/>\n      <xsl:with-param name=\"max\" select=\"$max\"\/>\n    <\/xsl:call-template>\n  <\/xsl:if>\n<\/xsl:template>\n<!--combine index and term-->\n<xsl:template match=\"\/\/index\">\n\t<xsl:call-template name=\"indexterm\">\n\t\t<xsl:with-param name=\"indexname\" select=\"@indexName\"\/>\n\t<\/xsl:call-template>\n<\/xsl:template>\n<xsl:template name=\"indexterm\">\n\t<xsl:param name=\"indexname\"\/>\n\t<xsl:element name=\"indexterm\">\n\t\t<xsl:if test=\"$indexname!=undefined\">\n\t\t\t<xsl:attribute name=\"indexname\">\n\t\t\t\t<xsl:value-of select=\"$indexname\"\/>\n\t\t\t<\/xsl:attribute>\n\t\t<\/xsl:if>\n\t\t<xsl:apply-templates select=\"node()|@*\"\/>\n\t<\/xsl:element>\n<\/xsl:template>\n<!--unwrap terms-->\n<xsl:template match=\"\/\/term\">\n\t<xsl:value-of select=\".\"\/>\n<\/xsl:template>\n<!--strip out interpGrp-->\n<xsl:template match=\"\/\/interpGrp\">\n<\/xsl:template>\n<!--strip out note-->\n<xsl:template match=\"\/\/note\">\n<\/xsl:template>\n<!--strip out interp-->\n<xsl:template match=\"\/\/interp\">\n<\/xsl:template>\n<\/xsl:stylesheet>\n"
}